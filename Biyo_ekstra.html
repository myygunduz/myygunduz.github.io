<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Biyokimya İnteraktif Test Uygulaması</title>
    <style>
        /* --- GENEL AYARLAR VE TASARIM (CSS) --- */
        :root {
            --bg-color: #e0f7fa; /* Açık Mavi Arka Plan */
            --card-bg: #ffffff;
            --primary-color: #006064; /* Koyu Mavi/Teal Yazılar */
            --accent-color: #00acc1; /* Buton Rengi */
            --correct-color: #4caf50; /* Yeşil */
            --wrong-color: #f44336; /* Kırmızı */
            --text-color: #333;
            --font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }

        body {
            font-family: var(--font-family);
            background-color: var(--bg-color);
            margin: 0;
            padding: 0;
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            color: var(--text-color);
        }

        .container {
            width: 90%;
            max-width: 600px;
            background: var(--card-bg);
            border-radius: 15px;
            box-shadow: 0 10px 25px rgba(0,0,0,0.1);
            overflow: hidden;
            display: flex;
            flex-direction: column;
            position: relative;
        }

        /* HEADER & PROGRESS BAR */
        .header {
            padding: 20px;
            background-color: var(--primary-color);
            color: white;
            text-align: center;
        }

        .header h1 {
            margin: 0;
            font-size: 1.2rem;
            font-weight: 600;
        }

        .progress-container {
            width: 100%;
            height: 6px;
            background-color: rgba(255,255,255,0.3);
            margin-top: 10px;
            border-radius: 3px;
        }

        .progress-bar {
            height: 100%;
            background-color: #00e5ff;
            width: 0%;
            border-radius: 3px;
            transition: width 0.3s ease;
        }

        /* SORU ALANI */
        .question-area {
            padding: 30px 20px;
            min-height: 300px;
        }

        .question-text {
            font-size: 1.1rem;
            font-weight: 500;
            margin-bottom: 25px;
            line-height: 1.5;
            color: var(--primary-color);
        }

        .options-grid {
            display: grid;
            gap: 10px;
        }

        .option-btn {
            background-color: #f1f8e9;
            border: 2px solid #e0e0e0;
            padding: 12px 15px;
            border-radius: 8px;
            cursor: pointer;
            font-size: 1rem;
            text-align: left;
            transition: all 0.2s;
            color: var(--text-color);
        }

        .option-btn:hover:not(:disabled) {
            background-color: var(--accent-color);
            color: white;
            border-color: var(--accent-color);
        }

        /* DOĞRU/YANLIŞ DURUMLARI */
        .option-btn.correct {
            background-color: var(--correct-color) !important;
            color: white !important;
            border-color: var(--correct-color) !important;
        }

        .option-btn.wrong {
            background-color: var(--wrong-color) !important;
            color: white !important;
            border-color: var(--wrong-color) !important;
        }

        .option-btn:disabled {
            cursor: default;
            opacity: 0.9;
        }

        /* NAVİGASYON BUTONLARI */
        .controls {
            padding: 20px;
            display: flex;
            justify-content: space-between;
            border-top: 1px solid #eee;
        }

        .nav-btn {
            padding: 10px 20px;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            font-weight: bold;
            background-color: var(--primary-color);
            color: white;
            transition: background 0.2s;
        }

        .nav-btn:hover {
            background-color: #00838f;
        }

        .nav-btn:disabled {
            background-color: #ccc;
            cursor: not-allowed;
        }

        .shuffle-btn {
            background-color: #ff9800;
        }
        .shuffle-btn:hover {
            background-color: #f57c00;
        }

        /* SONUÇ EKRANI */
        .result-screen {
            display: none;
            padding: 30px;
            text-align: center;
        }

        .score-circle {
            width: 100px;
            height: 100px;
            background: var(--primary-color);
            color: white;
            border-radius: 50%;
            display: flex;
            justify-content: center;
            align-items: center;
            font-size: 1.5rem;
            margin: 0 auto 20px;
            font-weight: bold;
        }

        .mistakes-list {
            text-align: left;
            margin-top: 20px;
            max-height: 300px;
            overflow-y: auto;
            border-top: 1px solid #ddd;
            padding-top: 10px;
        }

        .mistake-item {
            background: #ffebee;
            padding: 10px;
            border-radius: 5px;
            margin-bottom: 10px;
            font-size: 0.9rem;
        }
        
        .mistake-item strong {
            display: block;
            margin-bottom: 5px;
            color: #d32f2f;
        }

        .hidden {
            display: none !important;
        }
    </style>
</head>
<body>

    <div class="container">
        <div class="header" id="header-section">
            <h1>Vitaminler, Mineraller ve Enzimler Testi</h1>
            <div class="progress-container">
                <div class="progress-bar" id="progress-bar"></div>
            </div>
            <div style="margin-top: 5px; font-size: 0.8rem;">
                Soru: <span id="current-q-num">1</span> / <span id="total-q-num">30</span>
            </div>
        </div>

        <div class="question-area" id="quiz-section">
            <div class="question-text" id="question-text">
                </div>
            <div class="options-grid" id="options-container">
                </div>
        </div>

        <div class="result-screen" id="result-section">
            <div class="score-circle" id="score-display">0/0</div>
            <h2>Test Tamamlandı!</h2>
            <p id="feedback-message"></p>
            
            <div id="mistakes-container" class="mistakes-list">
                <h3>Hatalı Cevaplanan Sorular ve Doğruları:</h3>
                </div>

            <button class="nav-btn shuffle-btn" onclick="restartQuiz()" style="margin-top:20px;">Testi Karıştır ve Tekrar Başlat</button>
        </div>

        <div class="controls" id="controls-section">
            <button class="nav-btn shuffle-btn" onclick="shuffleAndRestart()">Karıştır & Yenile</button>
            <div>
                <button class="nav-btn" id="prev-btn" onclick="changeQuestion(-1)">← Geri</button>
                <button class="nav-btn" id="next-btn" onclick="changeQuestion(1)">İleri →</button>
            </div>
        </div>
    </div>

    <script>
        /* --- VERİ SETİ (30 SORU) --- */
        const questionsData = [
            // --- YAĞDA ÇÖZÜNEN VİTAMİNLER (A, D, E, K) ---
            {
                id: 1,
                text: "Alacakaranlıkta görmeyi sağlayan rodopsin pigmentinin yapısına katılan ve eksikliğinde 'Gece Körlüğü' oluşan vitamin hangisidir?",
                options: ["A Vitamini (Retinol)", "E Vitamini", "D Vitamini", "C Vitamini"],
                answer: "A Vitamini (Retinol)"
            },
            {
                id: 2,
                text: "Kalsiyum ve fosforun bağırsaklardan emilimini artırarak kemik gelişimini sağlayan vitamin hangisidir?",
                options: ["D Vitamini", "K Vitamini", "A Vitamini", "B12 Vitamini"],
                answer: "D Vitamini"
            },
            {
                id: 3,
                text: "En güçlü antioksidanlardan biri olup hücre zarını serbest radikallerden koruyan vitamin hangisidir?",
                options: ["E Vitamini (Tokoferol)", "D Vitamini", "K Vitamini", "B1 Vitamini"],
                answer: "E Vitamini (Tokoferol)"
            },
            {
                id: 4,
                text: "Kanın pıhtılaşma faktörlerinin (Protrombin vb.) sentezi için karaciğerde gerekli olan vitamin hangisidir?",
                options: ["K Vitamini", "E Vitamini", "C Vitamini", "B6 Vitamini"],
                answer: "K Vitamini"
            },
            {
                id: 5,
                text: "Çocuklarda 'Raşitizm', yetişkinlerde 'Osteomalazi' hastalığı hangi vitaminin eksikliğinde görülür?",
                options: ["D Vitamini", "A Vitamini", "E Vitamini", "K Vitamini"],
                answer: "D Vitamini"
            },

            // --- SUDA ÇÖZÜNEN VİTAMİNLER (C ve B KOMPLEKSİ) ---
            {
                id: 6,
                text: "Bağ dokusu proteini olan Kollajen sentezi için elzem olan ve eksikliğinde 'Skorbüt' görülen vitamin hangisidir?",
                options: ["C Vitamini (Askorbik Asit)", "B1 Vitamini", "E Vitamini", "D Vitamini"],
                answer: "C Vitamini (Askorbik Asit)"
            },
            {
                id: 7,
                text: "Karbonhidrat metabolizmasında (Pirüvat Dehidrogenaz) koenzim olarak görev yapan ve eksikliğinde 'Beriberi' hastalığı oluşan vitamin hangisidir?",
                options: ["B1 (Tiamin)", "B2 (Riboflavin)", "B3 (Niasin)", "B6 (Piridoksin)"],
                answer: "B1 (Tiamin)"
            },
            {
                id: 8,
                text: "FAD ve FMN koenzimlerinin yapısına katılan, eksikliğinde ağız kenarında çatlaklar (Keylozis) görülen vitamin hangisidir?",
                options: ["B2 (Riboflavin)", "B1 (Tiamin)", "B12 (Kobalamin)", "C Vitamini"],
                answer: "B2 (Riboflavin)"
            },
            {
                id: 9,
                text: "NAD+ ve NADP+ koenzimlerinin öncüsü olan ve eksikliğinde 'Pellegra' (Dermatit, Demans, Diyare) görülen vitamin hangisidir?",
                options: ["B3 (Niasin)", "B1 (Tiamin)", "B9 (Folat)", "B5 (Pantotenik Asit)"],
                answer: "B3 (Niasin)"
            },
            {
                id: 10,
                text: "Koenzim A'nın (CoA) yapısına katılan ve enerji metabolizmasında merkezi rol oynayan vitamin hangisidir?",
                options: ["B5 (Pantotenik Asit)", "B3 (Niasin)", "B7 (Biotin)", "B1 (Tiamin)"],
                answer: "B5 (Pantotenik Asit)"
            },
            {
                id: 11,
                text: "Amino asit metabolizmasında (Transaminasyon reaksiyonlarında) çok önemli rol oynayan vitamin hangisidir?",
                options: ["B6 (Piridoksin)", "B2 (Riboflavin)", "B1 (Tiamin)", "C Vitamini"],
                answer: "B6 (Piridoksin)"
            },
            {
                id: 12,
                text: "Karboksilasyon reaksiyonlarında (örn: pirüvat karboksilaz) koenzim olarak görev yapan ve çiğ yumurta akındaki 'Avidin' tarafından emilimi engellenen vitamin hangisidir?",
                options: ["B7 (Biotin)", "B12 (Kobalamin)", "B9 (Folat)", "B3 (Niasin)"],
                answer: "B7 (Biotin)"
            },
            {
                id: 13,
                text: "DNA sentezi ve hücre bölünmesi için kritik olan, gebelikte eksikliği 'Nöral Tüp Defektine' yol açan vitamin hangisidir?",
                options: ["B9 (Folik Asit)", "B12 (Kobalamin)", "B6 (Piridoksin)", "A Vitamini"],
                answer: "B9 (Folik Asit)"
            },
            {
                id: 14,
                text: "Sadece hayvansal kaynaklarda bulunan, mideden salgılanan 'İntrinsik Faktör' ile emilen ve eksikliğinde 'Pernisiyöz Anemi' görülen vitamin hangisidir?",
                options: ["B12 (Kobalamin)", "B9 (Folat)", "Demir", "B6 (Piridoksin)"],
                answer: "B12 (Kobalamin)"
            },

            // --- MAKRO MİNERALLER ---
            {
                id: 15,
                text: "Vücutta en fazla bulunan mineral olup kemik ve diş yapısının temelini oluşturan element hangisidir?",
                options: ["Kalsiyum (Ca)", "Fosfor (P)", "Magnezyum (Mg)", "Demir (Fe)"],
                answer: "Kalsiyum (Ca)"
            },
            {
                id: 16,
                text: "Hücre dışı sıvının temel katyonu olup kan basıncı ve sıvı dengesini düzenleyen mineral hangisidir?",
                options: ["Sodyum (Na)", "Potasyum (K)", "Klor (Cl)", "Kalsiyum (Ca)"],
                answer: "Sodyum (Na)"
            },
            {
                id: 17,
                text: "Hücre içi sıvının temel katyonu olan ve kalbin elektriksel aktivitesi ile kas kasılmasında hayati rol oynayan mineral hangisidir?",
                options: ["Potasyum (K)", "Sodyum (Na)", "Magnezyum (Mg)", "Demir (Fe)"],
                answer: "Potasyum (K)"
            },
            {
                id: 18,
                text: "DNA, RNA ve ATP'nin yapısında bulunan, kemiklerde kalsiyumla birlikte yer alan mineral hangisidir?",
                options: ["Fosfor (P)", "Kükürt (S)", "Klor (Cl)", "Çinko (Zn)"],
                answer: "Fosfor (P)"
            },
            {
                id: 19,
                text: "Mide asidinin (HCl) üretiminde görev alan temel anyon hangisidir?",
                options: ["Klor (Cl)", "Sodyum (Na)", "Potasyum (K)", "İyot (I)"],
                answer: "Klor (Cl)"
            },
            {
                id: 20,
                text: "Klorofilin yapısında bulunan, insanlarda ise 300'den fazla enzimin kofaktörü olan ve kas kramplarını önleyen mineral hangisidir?",
                options: ["Magnezyum (Mg)", "Demir (Fe)", "Bakır (Cu)", "Mangan (Mn)"],
                answer: "Magnezyum (Mg)"
            },
            {
                id: 21,
                text: "Metiyonin ve Sistein gibi amino asitlerin yapısında bulunan mineral hangisidir?",
                options: ["Kükürt (S)", "Fosfor (P)", "Selenyum (Se)", "Demir (Fe)"],
                answer: "Kükürt (S)"
            },

            // --- MİKRO (ESER) MİNERALLER ---
            {
                id: 22,
                text: "Hemoglobinin yapısında oksijen taşıyan ve eksikliğinde en sık görülen anemi türüne yol açan mineral hangisidir?",
                options: ["Demir (Fe)", "Çinko (Zn)", "Bakır (Cu)", "Magnezyum (Mg)"],
                answer: "Demir (Fe)"
            },
            {
                id: 23,
                text: "T3 ve T4 tiroid hormonlarının sentezi için zorunlu olan ve eksikliğinde 'Guatr' görülen mineral hangisidir?",
                options: ["İyot (I)", "Selenyum (Se)", "Çinko (Zn)", "Flor (F)"],
                answer: "İyot (I)"
            },
            {
                id: 24,
                text: "İnsülinin etkisini artırarak glikoz tolerans faktörü olarak çalışan mineral hangisidir?",
                options: ["Krom (Cr)", "Mangan (Mn)", "İyot (I)", "Kobalt (Co)"],
                answer: "Krom (Cr)"
            },
            {
                id: 25,
                text: "Bağışıklık sistemi, yara iyileşmesi ve tat alma duyusu için kritik olan mineral hangisidir?",
                options: ["Çinko (Zn)", "Bakır (Cu)", "Demir (Fe)", "Kalsiyum (Ca)"],
                answer: "Çinko (Zn)"
            },
            {
                id: 26,
                text: "Glutatyon Peroksidaz enziminin yapısında bulunan ve E vitamini ile birlikte güçlü bir antioksidan olan mineral hangisidir?",
                options: ["Selenyum (Se)", "Çinko (Zn)", "Magnezyum (Mg)", "Fosfor (P)"],
                answer: "Selenyum (Se)"
            },
            {
                id: 27,
                text: "Demir emilimi için gerekli olan, fazlalığında 'Wilson Hastalığı'na (karaciğer ve beyinde birikim) yol açan mineral hangisidir?",
                options: ["Bakır (Cu)", "Çinko (Zn)", "Mangan (Mn)", "Krom (Cr)"],
                answer: "Bakır (Cu)"
            },
            {
                id: 28,
                text: "Diş minesinin yapısını güçlendirerek çürükleri önleyen mineral hangisidir?",
                options: ["Flor (F)", "Kalsiyum (Ca)", "Fosfor (P)", "Çinko (Zn)"],
                answer: "Flor (F)"
            },
            {
                id: 29,
                text: "B12 vitamininin (Kobalamin) merkezinde bulunan atom hangisidir?",
                options: ["Kobalt (Co)", "Demir (Fe)", "Magnezyum (Mg)", "Nikel (Ni)"],
                answer: "Kobalt (Co)"
            },

            // --- ENZİM SINIFLARI & GENEL KAVRAMLAR ---
            {
                id: 30,
                text: "ATP enerjisi kullanarak iki molekülü birbirine bağlayan (örn: DNA birleşimi) enzim sınıfına ____ denir.",
                options: ["Ligazlar", "Liyazlar", "Hidrolazlar", "Transferazlar"],
                answer: "Ligazlar"
            },
            {
                id: 31,
                text: "Su katarak kimyasal bağları kıran (Sindirim enzimleri bu gruba girer) enzim sınıfı hangisidir?",
                options: ["Hidrolazlar", "Oksidoredüktazlar", "İzomerazlar", "Ligazlar"],
                answer: "Hidrolazlar"
            },
            {
                id: 32,
                text: "Bir molekül içindeki atomların yerini değiştirerek izomerini oluşturan enzim sınıfı nedir?",
                options: ["İzomerazlar", "Transferazlar", "Liyazlar", "Ligazlar"],
                answer: "İzomerazlar"
            },
            {
                id: 33,
                text: "Bir molekülden fosfat, metil vb. grupları başka bir moleküle taşıyan (örn: Kinazlar) enzim sınıfı hangisidir?",
                options: ["Transferazlar", "Ligazlar", "Oksidoredüktazlar", "Hidrolazlar"],
                answer: "Transferazlar"
            },
            {
                id: 34,
                text: "Elektron transferi yaparak İndirgenme-Yükseltgenme (Redoks) tepkimelerini katalizleyen enzim sınıfı hangisidir?",
                options: ["Oksidoredüktazlar", "Hidrolazlar", "Liyazlar", "İzomerazlar"],
                answer: "Oksidoredüktazlar"
            },
            {
                id: 35,
                text: "Su kullanmadan kovalent bağları kırarak çift bağ oluşturan veya çift bağlara grup ekleyen enzim sınıfı hangisidir?",
                options: ["Liyazlar", "Ligazlar", "Transferazlar", "Hidrolazlar"],
                answer: "Liyazlar"
            },
            {
                id: 36,
                text: "Enzimlerin protein olmayan yardımcı kısımlarına (vitamin veya mineral kökenli) genel olarak ne ad verilir?",
                options: ["Kofaktör", "Apoenzim", "Substrat", "İnhibitör"],
                answer: "Kofaktör"
            },
            {
                id: 37,
                text: "Enzimlerin sadece protein kısmına (yardımcı kısım olmadan) ne ad verilir?",
                options: ["Apoenzim", "Holoenzim", "Koenzim", "Zimojen"],
                answer: "Apoenzim"
            },
            {
                id: 38,
                text: "Organik yapılı kofaktörlere (genellikle B vitaminlerinden türetilir) ne ad verilir?",
                options: ["Koenzim", "Prostetik grup", "Apoenzim", "Substrat"],
                answer: "Koenzim"
            },
            {
                id: 39,
                text: "Aşırı sıcaklık veya pH değişimi sonucu enzimin üç boyutlu yapısının bozulmasına ne denir?",
                options: ["Denatürasyon", "Renatürasyon", "İnhibisyon", "Aktivasyon"],
                answer: "Denatürasyon"
            },
            {
                id: 40,
                text: "Aşağıdakilerden hangisi yağda çözünen vitaminlerin ortak özelliğidir?",
                options: ["Vücutta (karaciğer ve yağ dokuda) depolanabilirler", "Günlük alınmaları zorunludur", "Fazlası idrarla atılır", "Koenzim olarak görev yapmazlar"],
                answer: "Vücutta (karaciğer ve yağ dokuda) depolanabilirler"
            },
            {
                id: 41,
                text: "Hangi mineralin eksikliği erkeklerde sperm üretimini olumsuz etkiler ve kısırlıkla ilişkilendirilir?",
                options: ["Çinko (Zn)", "Demir (Fe)", "Kalsiyum (Ca)", "Sodyum (Na)"],
                answer: "Çinko (Zn)"
            },
            {
                id: 42,
                text: "Alkolizmde emilimi en çok bozulan ve eksikliğinde Wernicke-Korsakoff sendromu görülen vitamin hangisidir?",
                options: ["B1 (Tiamin)", "C Vitamini", "D Vitamini", "E Vitamini"],
                answer: "B1 (Tiamin)"
            },
            {
                id: 43,
                text: "Hangi vitamin bitkisel besinlerde hiç bulunmaz, sadece hayvansal gıdalardan veya takviye ile alınır?",
                options: ["B12", "C", "Folat", "K"],
                answer: "B12"
            },
            {
                id: 44,
                text: "Kan basıncının yükselmesine (hipertansiyon) neden olan mineralin aşırı tüketimi hangisidir?",
                options: ["Sodyum", "Potasyum", "Magnezyum", "Kalsiyum"],
                answer: "Sodyum"
            },
            {
                id: 45,
                text: "Ksantin Oksidaz gibi enzimlerin yapısında bulunan iz element hangisidir?",
                options: ["Molibden (Mo)", "Krom (Cr)", "Flor (F)", "Nikel (Ni)"],
                answer: "Molibden (Mo)"
            }
        ];             

        /* --- UYGULAMA MANTIĞI (JS) --- */
        let currentQuestions = [];
        let currentIndex = 0;
        let userAnswers = []; // { questionId, isCorrect, selected, correct }
        let isAnswered = false;

        // Başlangıç Fonksiyonu
        function initQuiz() {
            currentQuestions = [...questionsData]; // Orijinal sırayı kopyala
            currentIndex = 0;
            userAnswers = new Array(questionsData.length).fill(null);
            updateUI();
        }

        // Karıştır ve Başlat
        function shuffleAndRestart() {
            if(confirm("Test sıfırlanacak ve soruların yeri değişecek. Onaylıyor musunuz?")) {
                restartQuiz();
            }
        }

        function restartQuiz() {
            // Fisher-Yates Shuffle
            currentQuestions = [...questionsData];
            for (let i = currentQuestions.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [currentQuestions[i], currentQuestions[j]] = [currentQuestions[j], currentQuestions[i]];
            }
            
            currentIndex = 0;
            userAnswers = new Array(questionsData.length).fill(null);
            
            document.getElementById('result-section').style.display = 'none';
            document.getElementById('quiz-section').classList.remove('hidden');
            document.getElementById('controls-section').classList.remove('hidden');
            document.getElementById('header-section').classList.remove('hidden');
            
            updateUI();
        }

        // UI Güncelleme
        function updateUI() {
            const currentQ = currentQuestions[currentIndex];
            isAnswered = userAnswers[currentIndex] !== null;

            // Header Bilgileri
            document.getElementById('current-q-num').innerText = currentIndex + 1;
            document.getElementById('total-q-num').innerText = currentQuestions.length;
            
            const progressPercent = ((currentIndex) / currentQuestions.length) * 100;
            document.getElementById('progress-bar').style.width = `${progressPercent}%`;

            // Soruyu Yazdır
            document.getElementById('question-text').innerText = currentQ.text;

            // Şıkları Yazdır
            const optionsContainer = document.getElementById('options-container');
            optionsContainer.innerHTML = '';

            currentQ.options.forEach(opt => {
                const btn = document.createElement('button');
                btn.className = 'option-btn';
                btn.innerText = opt;
                btn.onclick = () => handleAnswer(opt, btn);

                // Eğer daha önce cevaplanmışsa durumunu geri yükle
                if (isAnswered) {
                    btn.disabled = true;
                    const savedAns = userAnswers[currentIndex];
                    
                    if (opt === currentQ.answer) {
                        btn.classList.add('correct');
                    }
                    if (opt === savedAns.selected && !savedAns.isCorrect) {
                        btn.classList.add('wrong');
                    }
                }
                
                optionsContainer.appendChild(btn);
            });

            // Navigasyon Buton Kontrolü
            document.getElementById('prev-btn').disabled = (currentIndex === 0);
            
            const nextBtn = document.getElementById('next-btn');
            if (currentIndex === currentQuestions.length - 1) {
                nextBtn.innerText = "Testi Bitir";
                nextBtn.onclick = finishQuiz;
            } else {
                nextBtn.innerText = "İleri →";
                nextBtn.onclick = () => changeQuestion(1);
            }
        }

// Cevap Verme İşlemi
        function handleAnswer(selectedOption, btnElement) {
            if (isAnswered) return;

            const currentQ = currentQuestions[currentIndex];
            const isCorrect = (selectedOption === currentQ.answer);

            // Kaydet
            userAnswers[currentIndex] = {
                questionId: currentQ.id,
                questionText: currentQ.text,
                selected: selectedOption,
                correct: currentQ.answer,
                isCorrect: isCorrect
            };

            // Görsel Geri Bildirim
            const buttons = document.querySelectorAll('.option-btn');
            buttons.forEach(b => {
                b.disabled = true;
                if (b.innerText === currentQ.answer) {
                    b.classList.add('correct');
                }
                if (b === btnElement && !isCorrect) {
                    b.classList.add('wrong');
                }
            });

            isAnswered = true;
        }

        // Soru Değiştirme
        function changeQuestion(direction) {
            currentIndex += direction;
            updateUI();
        }

        // Testi Bitirme ve Sonuçlar
        function finishQuiz() {
            // Cevaplanmamış soru var mı kontrolü (İsteğe bağlı, burada direkt bitiriyoruz)
            showResults();
        }

        function showResults() {
            document.getElementById('quiz-section').classList.add('hidden');
            document.getElementById('controls-section').classList.add('hidden');
            document.getElementById('header-section').classList.add('hidden');
            document.getElementById('result-section').style.display = 'block';

            let correctCount = 0;
            const mistakesContainer = document.getElementById('mistakes-container');
            mistakesContainer.innerHTML = '<h3>Hatalı Cevaplanan Sorular ve Doğruları:</h3>';

            let hasMistakes = false;

            userAnswers.forEach((ans, index) => {
                if (ans && ans.isCorrect) {
                    correctCount++;
                } else {
                    // Yanlış veya Boş
                    hasMistakes = true;
                    const qText = ans ? ans.questionText : currentQuestions[index].text;
                    const correctAns = ans ? ans.correct : currentQuestions[index].answer;
                    const userAns = ans ? ans.selected : "Boş Bırakıldı";

                    const div = document.createElement('div');
                    div.className = 'mistake-item';
                    div.innerHTML = `
                        <strong>Soru: ${qText}</strong>
                        <span style="color:red">Sizin Cevabınız: ${userAns}</span><br>
                        <span style="color:green">Doğru Cevap: ${correctAns}</span>
                    `;
                    mistakesContainer.appendChild(div);
                }
            });

            if (!hasMistakes) {
                mistakesContainer.innerHTML += "<p style='color:green; font-weight:bold;'>Tebrikler! Hiç yanlışınız yok.</p>";
            }

            document.getElementById('score-display').innerText = `${correctCount}/${currentQuestions.length}`;
            
            const feedbackMsg = document.getElementById('feedback-message');
            const scorePercent = (correctCount / currentQuestions.length) * 100;
            
            if(scorePercent >= 90) feedbackMsg.innerText = "Mükemmel sonuç! Konuya çok hakimsin.";
            else if(scorePercent >= 70) feedbackMsg.innerText = "Gayet iyi, ufak tekrarlarla tamamlarsın.";
            else feedbackMsg.innerText = "Biraz daha çalışman gerekebilir.";
        }

        // Uygulamayı Başlat
        window.onload = initQuiz;

    </script>
</body>
</html>
               
